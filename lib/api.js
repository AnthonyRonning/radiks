"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.destroyModel = exports.fetchCentral = exports.saveCentral = exports.find = exports.checkPayReq = exports.sendNewGaiaUrlLN = exports.sendNewGaiaUrl = void 0;

var _qs = require("qs");

var _config = require("./config");

const sendNewGaiaUrl = async gaiaURL => {
  const {
    apiServer
  } = (0, _config.getConfig)();
  const url = `${apiServer}/radiks/models/crawl`; // console.log(url, gaiaURL);

  const data = {
    gaiaURL
  };
  const response = await fetch(url, {
    method: 'POST',
    body: JSON.stringify(data),
    headers: new Headers({
      'Content-Type': 'application/json'
    })
  });
  const {
    success,
    message
  } = await response.json();

  if (!success) {
    throw new Error(`Error when saving model: '${message}'`);
  }

  return message;
};

exports.sendNewGaiaUrl = sendNewGaiaUrl;

const sendNewGaiaUrlLN = async gaiaURL => {
  const {
    apiServer
  } = (0, _config.getConfig)();
  const url = `${apiServer}/radiks/models/crawl/ln`; // console.log(url, gaiaURL);

  const data = {
    gaiaURL
  };
  const response = await fetch(url, {
    method: 'POST',
    body: JSON.stringify(data),
    headers: new Headers({
      'Content-Type': 'application/json'
    })
  });
  const {
    success,
    message
  } = await response.json();

  if (!success) {
    throw new Error(`Error when saving model: '${message}'`);
  }

  return message;
};

exports.sendNewGaiaUrlLN = sendNewGaiaUrlLN;

const checkPayReq = async payReqId => {
  const {
    apiServer
  } = (0, _config.getConfig)();
  const url = `${apiServer}/radiks/models/ln/${payReqId}`; // console.log(url, gaiaURL);

  const response = await fetch(url, {
    method: 'GET',
    headers: new Headers({
      'Content-Type': 'application/json'
    })
  });
  return await response.json();
};

exports.checkPayReq = checkPayReq;

const find = async query => {
  const {
    apiServer
  } = (0, _config.getConfig)();
  const queryString = (0, _qs.stringify)(query, {
    arrayFormat: 'brackets',
    encode: false
  });
  const url = `${apiServer}/radiks/models/find?${queryString}`;
  const response = await fetch(url);
  const data = await response.json();
  return data;
};

exports.find = find;

const saveCentral = async data => {
  const {
    apiServer
  } = (0, _config.getConfig)();
  const url = `${apiServer}/radiks/central`;
  const response = await fetch(url, {
    method: 'POST',
    body: JSON.stringify(data),
    headers: new Headers({
      'Content-Type': 'application/json'
    })
  });
  const {
    success
  } = await response.json();
  return success;
};

exports.saveCentral = saveCentral;

const fetchCentral = async (key, username, signature) => {
  const {
    apiServer
  } = (0, _config.getConfig)();
  const queryString = (0, _qs.stringify)({
    username,
    signature
  });
  const url = `${apiServer}/radiks/central/${key}?${queryString}`;
  const response = await fetch(url);
  const value = await response.json();
  return value;
};

exports.fetchCentral = fetchCentral;

const destroyModel = async model => {
  const {
    apiServer
  } = (0, _config.getConfig)();
  const queryString = (0, _qs.stringify)({
    signature: model.attrs.radiksSignature
  });
  const url = `${apiServer}/radiks/models/${model._id}?${queryString}`;
  const response = await fetch(url, {
    method: 'DELETE'
  });
  const data = await response.json();
  console.log(data);
  return data.success;
};

exports.destroyModel = destroyModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hcGkudHMiXSwibmFtZXMiOlsic2VuZE5ld0dhaWFVcmwiLCJnYWlhVVJMIiwiYXBpU2VydmVyIiwidXJsIiwiZGF0YSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJIZWFkZXJzIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJqc29uIiwiRXJyb3IiLCJzZW5kTmV3R2FpYVVybExOIiwiY2hlY2tQYXlSZXEiLCJwYXlSZXFJZCIsImZpbmQiLCJxdWVyeSIsInF1ZXJ5U3RyaW5nIiwiYXJyYXlGb3JtYXQiLCJlbmNvZGUiLCJzYXZlQ2VudHJhbCIsImZldGNoQ2VudHJhbCIsImtleSIsInVzZXJuYW1lIiwic2lnbmF0dXJlIiwidmFsdWUiLCJkZXN0cm95TW9kZWwiLCJtb2RlbCIsImF0dHJzIiwicmFkaWtzU2lnbmF0dXJlIiwiX2lkIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUdPLE1BQU1BLGNBQWMsR0FBRyxNQUFPQyxPQUFQLElBQTZDO0FBQ3pFLFFBQU07QUFBRUMsSUFBQUE7QUFBRixNQUFnQix3QkFBdEI7QUFDQSxRQUFNQyxHQUFHLEdBQUksR0FBRUQsU0FBVSxzQkFBekIsQ0FGeUUsQ0FHekU7O0FBQ0EsUUFBTUUsSUFBSSxHQUFHO0FBQUVILElBQUFBO0FBQUYsR0FBYjtBQUNBLFFBQU1JLFFBQVEsR0FBRyxNQUFNQyxLQUFLLENBQUNILEdBQUQsRUFBTTtBQUNoQ0ksSUFBQUEsTUFBTSxFQUFFLE1BRHdCO0FBRWhDQyxJQUFBQSxJQUFJLEVBQUVDLElBQUksQ0FBQ0MsU0FBTCxDQUFlTixJQUFmLENBRjBCO0FBR2hDTyxJQUFBQSxPQUFPLEVBQUUsSUFBSUMsT0FBSixDQUFZO0FBQ25CLHNCQUFnQjtBQURHLEtBQVo7QUFIdUIsR0FBTixDQUE1QjtBQU9BLFFBQU07QUFBRUMsSUFBQUEsT0FBRjtBQUFXQyxJQUFB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T0FBWjtBQUNELENBVk0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICdxcyc7XG5pbXBvcnQgeyBnZXRDb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2RlbCc7XG5cbmV4cG9ydCBjb25zdCBzZW5kTmV3R2FpYVVybCA9IGFzeW5jIChnYWlhVVJMOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgY29uc3QgeyBhcGlTZXJ2ZXIgfSA9IGdldENvbmZpZygpO1xuICBjb25zdCB1cmwgPSBgJHthcGlTZXJ2ZXJ9L3JhZGlrcy9tb2RlbHMvY3Jhd2xgO1xuICAvLyBjb25zb2xlLmxvZyh1cmwsIGdhaWFVUkwpO1xuICBjb25zdCBkYXRhID0geyBnYWlhVVJMIH07XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgaGVhZGVyczogbmV3IEhlYWRlcnMoe1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9KSxcbiAgfSk7XG4gIGNvbnN0IHsgc3VjY2VzcywgbWVzc2FnZSB9ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHdoZW4gc2F2aW5nIG1vZGVsOiAnJHttZXNzYWdlfSdgKTtcbiAgfVxuICByZXR1cm4gbWVzc2FnZTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZW5kTmV3R2FpYVVybExOID0gYXN5bmMgKGdhaWFVUkw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgIGNvbnN0IHsgYXBpU2VydmVyIH0gPSBnZXRDb25maWcoKTtcbiAgICBjb25zdCB1cmwgPSBgJHthcGlTZXJ2ZXJ9L3JhZGlrcy9tb2RlbHMvY3Jhd2wvbG5gO1xuICAgIC8vIGNvbnNvbGUubG9nKHVybCwgZ2FpYVVSTCk7XG4gICAgY29uc3QgZGF0YSA9IHsgZ2FpYVVSTCB9O1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoe1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSksXG4gICAgfSk7XG4gICAgY29uc3QgeyBzdWNjZXNzLCBtZXNzYWdlIH0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3Igd2hlbiBzYXZpbmcgbW9kZWw6ICcke21lc3NhZ2V9J2ApO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbn07XG5cbmV4cG9ydCBjb25zdCBjaGVja1BheVJlcSA9IGFzeW5jIChwYXlSZXFJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICBjb25zdCB7IGFwaVNlcnZlciB9ID0gZ2V0Q29uZmlnKCk7XG4gICAgY29uc3QgdXJsID0gYCR7YXBpU2VydmVyfS9yYWRpa3MvbW9kZWxzL2xuLyR7cGF5UmVxSWR9YDtcbiAgICAvLyBjb25zb2xlLmxvZyh1cmwsIGdhaWFVUkwpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0pLFxuICAgIH0pO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmRRdWVyeSB7XG4gIGxpbWl0PzogbnVtYmVyLFxuICBbeDogc3RyaW5nXTogYW55LFxufVxuXG5leHBvcnQgY29uc3QgZmluZCA9IGFzeW5jIChxdWVyeTogRmluZFF1ZXJ5KSA9PiB7XG4gIGNvbnN0IHsgYXBpU2VydmVyIH0gPSBnZXRDb25maWcoKTtcbiAgY29uc3QgcXVlcnlTdHJpbmcgPSBzdHJpbmdpZnkocXVlcnksIHsgYXJyYXlGb3JtYXQ6ICdicmFja2V0cycsIGVuY29kZTogZmFsc2UgfSk7XG4gIGNvbnN0IHVybCA9IGAke2FwaVNlcnZlcn0vcmFkaWtzL21vZGVscy9maW5kPyR7cXVlcnlTdHJpbmd9YDtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICByZXR1cm4gZGF0YTtcbn07XG5cbmludGVyZmFjZSBDZW50cmFsU2F2ZURhdGEge1xuICBzaWduYXR1cmU6IHN0cmluZyxcbiAgdXNlcm5hbWU6IHN0cmluZyxcbiAga2V5OiBzdHJpbmcsXG4gIHZhbHVlOiBhbnksXG59XG5cbmV4cG9ydCBjb25zdCBzYXZlQ2VudHJhbCA9IGFzeW5jIChkYXRhOiBDZW50cmFsU2F2ZURhdGEpID0+IHtcbiAgY29uc3QgeyBhcGlTZXJ2ZXIgfSA9IGdldENvbmZpZygpO1xuICBjb25zdCB1cmwgPSBgJHthcGlTZXJ2ZXJ9L3JhZGlrcy9jZW50cmFsYDtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSksXG4gIH0pO1xuICBjb25zdCB7IHN1Y2Nlc3MgfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgcmV0dXJuIHN1Y2Nlc3M7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hDZW50cmFsID0gYXN5bmMgKGtleTogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nLCBzaWduYXR1cmU6IHN0cmluZykgPT4ge1xuICBjb25zdCB7IGFwaVNlcnZlciB9ID0gZ2V0Q29uZmlnKCk7XG4gIGNvbnN0IHF1ZXJ5U3RyaW5nID0gc3RyaW5naWZ5KHsgdXNlcm5hbWUsIHNpZ25hdHVyZSB9KTtcbiAgY29uc3QgdXJsID0gYCR7YXBpU2VydmVyfS9yYWRpa3MvY2VudHJhbC8ke2tleX0/JHtxdWVyeVN0cmluZ31gO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IHZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG5leHBvcnQgY29uc3QgZGVzdHJveU1vZGVsID0gYXN5bmMgKG1vZGVsOiBNb2RlbCkgPT4ge1xuICBjb25zdCB7IGFwaVNlcnZlciB9ID0gZ2V0Q29uZmlnKCk7XG4gIGNvbnN0IHF1ZXJ5U3RyaW5nID0gc3RyaW5naWZ5KHsgc2lnbmF0dXJlOiBtb2RlbC5hdHRycy5yYWRpa3NTaWduYXR1cmUgfSk7XG4gIGNvbnN0IHVybCA9IGAke2FwaVNlcnZlcn0vcmFkaWtzL21vZGVscy8ke21vZGVsLl9pZH0/JHtxdWVyeVN0cmluZ31gO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gIH0pO1xuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgcmV0dXJuIGRhdGEuc3VjY2Vzcztcbn07XG4iXX0=